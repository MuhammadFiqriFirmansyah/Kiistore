@model List<GameTopupStore.Models.GameTopup>
@{
    ViewData["Title"] = "Kelola Game Topup";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<div class="admin-card">
    <div class="admin-card-header">
        <h4><i class="fas fa-gamepad"></i> Daftar Game Topup</h4>
        <div class="d-flex gap-2">
            @if (Model.Count == 0)
            {
                <a asp-action="SeedData" class="btn btn-success" onclick="return confirm('Yakin ingin membuat data sample? Ini akan membuat 30+ game topup untuk MLBB, HOK, AOV, PUBG, Free Fire, Roblox, dan COC.')">
                    <i class="fas fa-seedling"></i> Buat Data Sample
                </a>
            }
            <a asp-action="CreateTopup" class="btn btn-admin-primary">
                <i class="fas fa-plus"></i> Tambah Topup Baru
            </a>
        </div>
    </div>
    
    @if (Model.Count == 0)
    {
        <div class="alert alert-warning" style="background: rgba(251, 191, 36, 0.1); border: 2px solid var(--admin-gold);">
            <i class="fas fa-info-circle"></i> 
            <strong>Belum ada game topup.</strong>
            <br>
            <small>Klik tombol "Buat Data Sample" untuk membuat data sample game topup (MLBB, HOK, AOV, PUBG, Free Fire, Roblox, COC) atau tambahkan topup baru secara manual.</small>
        </div>
    }
    else
    {
        <div class="admin-table">
            <table class="table table-hover mb-0">
                <thead>
                    <tr>
                        <th>Gambar</th>
                        <th>Nama Game</th>
                        <th>Tipe Game</th>
                        <th>Kategori</th>
                        <th>Jumlah</th>
                        <th>Harga</th>
                        <th>Stok</th>
                        <th>Aksi</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var topup in Model)
                    {
                        <tr>
                            <td>
                                @if (!string.IsNullOrEmpty(topup.ImageUrl))
                                {
                                    <img src="@topup.ImageUrl" alt="Game" style="width: 50px; height: 50px; object-fit: cover; border-radius: 5px;">
                                }
                                else
                                {
                                    <div style="width: 50px; height: 50px; background: #ddd; border-radius: 5px; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-gamepad"></i>
                                    </div>
                                }
                            </td>
                            <td><strong>@topup.GameName</strong><br><small class="text-muted">Server: @topup.Server</small></td>
                            <td><span class="badge bg-primary">@topup.GameType</span></td>
                            <td><span class="badge bg-info">@topup.Category</span></td>
                            <td><strong>@topup.Amount @topup.Category</strong></td>
                            <td><strong>Rp @topup.Price.ToString("N0")</strong></td>
                            <td>
                                @if (topup.Stock > 10)
                                {
                                    <span class="badge bg-success">@topup.Stock</span>
                                }
                                else if (topup.Stock > 0)
                                {
                                    <span class="badge bg-warning">@topup.Stock</span>
                                }
                                else
                                {
                                    <span class="badge bg-danger">Habis</span>
                                }
                            </td>
                            <td>
                                <a asp-action="EditTopup" asp-route-id="@topup.Id" class="btn btn-sm btn-warning">
                                    <i class="fas fa-edit"></i>
                                </a>
                                <a asp-action="DeleteTopup" asp-route-id="@topup.Id" class="btn btn-sm btn-danger" onclick="return confirm('Yakin ingin menghapus topup ini?')">
                                    <i class="fas fa-trash"></i>
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
</div>

